#!/bin/bash

NUM_TASK=11
SCENARIO=class
DATASET=ember
GPU_NUMBER=1

CUDA_VISIBLE_DEVICES=1 python main.py --data_set=drebin--tasks=9 --si --c=0.1 --metrics --logger_file si --scenario=task

now="$(date)"
printf "Current date and time %s\n" "$now"
echo $'############ START EWC ############'
counter=1
while [ $counter -le 10 ]
do
echo start w/ run $counter 
((counter++))
CUDA_VISIBLE_DEVICES=${GPU_NUMBER} python main.py --data_set=${DATASET} --tasks=${NUM_TASK} --ewc --lambda=5000 --metrics --logger_file ewc --scenario=${SCENARIO} 
done
echo All done


now="$(date)"
printf "Current date and time %s\n" "$now"
echo $'############ START EWC Online ############'
counter=1
while [ $counter -le 10 ]
do
echo start w/ run $counter 
((counter++))
CUDA_VISIBLE_DEVICES=${GPU_NUMBER} python main.py --data_set=${DATASET} --tasks=${NUM_TASK} --ewc --online --lambda=5000 --gamma=1 --metrics --logger_file ewc_online --scenario=${SCENARIO}
done
echo All done


now="$(date)"
printf "Current date and time %s\n" "$now"
echo $'############ START SI ############'
counter=1
while [ $counter -le 10 ]
do
echo start w/ run $counter 
((counter++))
CUDA_VISIBLE_DEVICES=${GPU_NUMBER} python main.py --data_set=${DATASET} --tasks=${NUM_TASK} --si --c=0.1 --metrics --logger_file si --scenario=${SCENARIO} 
done
echo All done


now="$(date)"
printf "Current date and time %s\n" "$now"
echo $'############ START LwF ############'
counter=1
while [ $counter -le 10 ]
do
echo start w/ run $counter 
((counter++))
CUDA_VISIBLE_DEVICES=${GPU_NUMBER} python main.py --data_set=${DATASET} --tasks=${NUM_TASK} --replay=current --distill --metrics --logger_file lwf --scenario=${SCENARIO} 
done
echo All done


